sudo: false
language: cpp
compiler:
  clang

addons:
  apt:
    sources:
      - ubuntu-toolchain-r-test
      - llvm-toolchain-precise-3.8
    packages:
      - clang-3.8
      - clang-format-3.8

env:
  - CC=clang-3.8 CXX=clang++3.8

script:
  - ./run format
  - if [[ -n $(git status --porcelain) ]]; then \
      echo "make sure the code is formatted."   \
      exit 1                                    \
    else                                        \
      exit 0                                    \
    fi

notifications:
  email: false
